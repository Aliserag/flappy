(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(i,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(8607)}])},8607:function(i,t,e){"use strict";e.r(t),e.d(t,{default:function(){return P}});var n=e(5893),o=e(9008),r=e.n(o),a=e(603),s=e(7294),d=e(5432),l=e(1799),u=e(9396),c=e(6486),p=e.n(c),h=e(9457),f=e(7632),x=["0px","92px","184px","0px"],v={bird:{position:{x:0,y:0},size:{width:92,height:64},animate:{},frame:x[0],frameIndex:0,initial:{x:0,y:0},isFlying:!0,fall:{distance:15,delay:100},fly:{distance:75},flap:{delay:100}},pipes:Array(4).fill("").map((function(i,t){return{top:{key:"top"+t,position:{x:0,y:0},initial:{x:0,y:0},size:{width:0,height:0}},bottom:{key:"bottom"+t,position:{x:0,y:0},initial:{x:0,y:0},size:{width:0,height:0}}}})),pipe:{width:0,height:0,extension:0,tolerance:25,distance:10,delay:75},rounds:[],isStarted:!1,isReady:!1,window:{width:0,height:0},multiplier:{distance:1.1,step:5}},g=s.createContext(null),m=function(i){var t=i.children,e=(0,a.Z)((0,h.x)(v),2),o=e[0],r=e[1],s=function(i,t){var e=1===p().random(0,1),n=p().random(e?.5:0,e?1:0,!0)*t.pipe.extension;return{height:t.pipe.height+n,y:t.window.height-t.pipe.height+n}},d=function(i){var t=i.window;i.pipe.width=t.width/i.pipes.length,i.pipe.height=1/3*t.height,i.pipe.distance=v.pipe.distance,i.pipe.extension=.5/3*t.height,i.pipes.forEach((function(e,n){var o=s(0,i),r=o.height,a=o.y,d=(2*n+1)*i.pipe.width+t.width;e.top.initial={x:d,y:0},e.top.size={height:r,width:i.pipe.width},e.bottom.initial={x:d,y:a},e.bottom.size={height:r,width:i.pipe.width},e.top.position=e.top.initial,e.bottom.position=e.bottom.initial}))},c=function(i){i.bird.position.x=i.window.width/2-i.bird.size.width/2,i.bird.position.y=i.window.height/2-i.bird.size.height/2,i.bird.initial.x=i.bird.position.x,i.bird.initial.y=i.bird.position.y},m=function(i){var t=i.bird.position.y+i.bird.size.height>=i.window.height+i.pipe.tolerance,e=i.pipes.filter((function(t){return t.top.position.x<i.bird.position.x-i.pipe.tolerance+i.bird.size.width&&t.top.position.x+t.top.size.width>i.bird.position.x+i.pipe.tolerance})).some((function(t){var e=t.top.position.y+t.top.size.height,n=t.bottom.position.y,o=i.bird.position.y+i.pipe.tolerance,r=i.bird.position.y+i.bird.size.height-i.pipe.tolerance;return o<e||r>n}));t||e?(i.bird.isFlying=!1,i.isStarted=!1,i.bird.animate.rotate=[0,540]):i.bird.animate.rotate=[0,0]},b=function(){r((function(i){return i.bird.isFlying=!0,i.bird.position.y-=i.bird.fly.distance,m(i),i}))};return(0,n.jsx)(g.Provider,{value:(0,u.Z)((0,l.Z)({},o),{getNextFrame:function(){return r((function(i){var t=(i.bird.frameIndex+1)%x.length;return i.bird.frame=x[t],i.bird.frameIndex=t,i}))},fall:function(){r((function(i){return i.bird.isFlying=!0,i.bird.position.y+=i.bird.fall.distance,m(i),i}))},fly:b,handleWindowClick:function(){o.isStarted?b():r((function(i){return i.isStarted=!0,i.rounds.push({score:0,datetime:(new Date).toISOString(),key:(0,f.Z)()}),i.bird.isFlying=!0,c(i),d(i),i}))},movePipes:function(){r((function(i){return i.pipes.forEach((function(t,e){if(t.top.position.x+2*t.top.size.width<=0){var n=s(0,i),o=n.height,r=n.y;t.top.position.x=2*i.pipe.width+i.window.width,t.bottom.position.x=2*i.pipe.width+i.window.width,t.top.size.height=o,t.bottom.size.height=o,t.bottom.position.y=r,t.top.key=(0,f.Z)(),t.bottom.key=(0,f.Z)(),function(i){i.rounds[i.rounds.length-1].score+=1}(i),function(i){var t=p().last(i.rounds);t&&t.score%i.multiplier.step===0&&(i.pipe.distance=i.pipe.distance*i.multiplier.distance)}(i)}t.top.position.x-=i.pipe.distance,t.bottom.position.x-=i.pipe.distance})),i}))},startGame:function(i){r((function(t){return t.window=i,t.isReady=!0,c(t),d(t),t}))}}),children:t})};function b(){var i=s.useContext(g);if(null===i)throw new Error("useGame must be used within a GameProvider");return i}var w=s.useLayoutEffect;var y=function(i,t){var e=(0,s.useRef)(i);w((function(){e.current=i}),[i]),(0,s.useEffect)((function(){if(t||0===t){var i=setInterval((function(){return e.current()}),t);return function(){return clearInterval(i)}}}),[t])};function j(){var i=b(),t=i.bird,e=t.size,o=e.height,r=e.width,a=t.frame,s=t.isFlying,d=t.flap.delay,l=i.getNextFrame;return y((function(){return l()}),s?d:null),(0,n.jsx)("div",{style:{backgroundImage:"url(bird.png)",height:o,width:r,backgroundPosition:a,backgroundSize:"auto 100%",zIndex:100}})}function z(){var i=b(),t=i.isStarted,e=i.bird,o=e.fall.delay,r=e.position,a=e.animate,s=i.fall;return y((function(){return s()}),t?o:null),(0,n.jsx)(d.E.div,{className:"m-auto absolute z-40 ".concat(!t&&"animate-pulse"," w-20 h-10"),style:(0,l.Z)({},r),animate:(0,l.Z)({},r,a),transition:{ease:"linear",duration:.25},children:(0,n.jsx)(j,{})})}function k(){var i,t,e=b(),o=e.isStarted,r=e.rounds,a=e.pipe.distance,s=o?{animate:{backgroundPosition:["0","-50px"]},transition:{repeat:1/0,duration:.5,repeatType:"loop",ease:"linear"}}:{},u=(null===(i=p().last(r))||void 0===i?void 0:i.score)||0,c=(null===(t=p().maxBy(r,"score"))||void 0===t?void 0:t.score)||0;return(0,n.jsxs)("footer",{className:"w-full h-28 bg-[#ded895] relative rounded-b-lg",children:[(0,n.jsx)("div",{className:"bg-green-500 border-y-4 relative border-green-600 h-10",children:(0,n.jsx)(d.E.div,(0,l.Z)({style:{backgroundImage:"linear-gradient(\n              -45deg,\n              rgba(255, 255, 255, 0.2) 25%,\n              transparent 25%,\n              transparent 50%,\n              rgba(255, 255, 255, 0.2) 50%,\n              rgba(255, 255, 255, 0.2) 75%,\n              transparent 75%,\n              transparent\n            )",backgroundSize:"50px 50px"},className:"absolute w-full h-full"},s))}),(0,n.jsxs)("div",{className:"flex p-2 uppercase font-mono font-semibold items-center justify-around h-[calc(100%-2.5rem)] text-xl text-green-900 flex-wrap",children:[(0,n.jsxs)("div",{children:["Best: ",c]}),(0,n.jsxs)("div",{children:["Score: ",u]}),(0,n.jsxs)("div",{className:"w-full text-center text-lg",children:["Speed: ",(a/10).toFixed(1)]})]})]})}var E=e(1351);function N(i){i=null!==i?i:(0,E.Z)(new TypeError("Cannot destructure undefined"));return(0,n.jsx)("div",{className:"absolute w-full h-full z-1 pb-2 rounded-t-lg",children:(0,n.jsx)("img",{src:"bg.png",alt:"",className:"w-full h-full object-cover rounded-t-lg"})})}function S(){var i=b(),t=i.isStarted,e=i.pipe.delay,o=i.pipes,r=i.movePipes;return y((function(){return r()}),t?e:null),(0,n.jsx)(n.Fragment,{children:o.map((function(i,t){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.E.div,{initial:i.top.initial,animate:i.top.position,style:(0,u.Z)((0,l.Z)({},i.top.size),{rotate:180}),className:"absolute",children:(0,n.jsx)(F,{}),transition:{ease:"linear"}},i.top.key),(0,n.jsx)(d.E.div,{initial:i.bottom.initial,animate:i.bottom.position,style:i.bottom.size,className:"absolute",children:(0,n.jsx)(F,{}),transition:{ease:"linear"}},i.bottom.key)]})}))})}function F(){return(0,n.jsx)("img",{src:"pipe.png",className:"h-full w-full pointer-events-none",alt:""})}var Z=function(i,t,e,n){var o=(0,s.useRef)(t);w((function(){o.current=t}),[t]),(0,s.useEffect)((function(){var t,r=null!==(t=null===e||void 0===e?void 0:e.current)&&void 0!==t?t:window;if(r&&r.addEventListener){var a=function(i){return o.current(i)};return r.addEventListener(i,a,n),function(){r.removeEventListener(i,a,n)}}}),[i,e,n])};var _=function(){var i=(0,s.useState)(null),t=i[0],e=i[1],n=(0,s.useState)({width:0,height:0}),o=n[0],r=n[1],a=(0,s.useCallback)((function(){r({width:(null===t||void 0===t?void 0:t.offsetWidth)||0,height:(null===t||void 0===t?void 0:t.offsetHeight)||0})}),[null===t||void 0===t?void 0:t.offsetHeight,null===t||void 0===t?void 0:t.offsetWidth]);return Z("resize",a),w((function(){a()}),[null===t||void 0===t?void 0:t.offsetHeight,null===t||void 0===t?void 0:t.offsetWidth]),[e,o]};function I(){var i,t=b(),e=t.handleWindowClick,o=t.startGame,r=t.isReady,l=t.rounds,u=(0,a.Z)(_(),2),c=u[0],h=u[1];return(0,s.useEffect)((function(){h.width>0&&h.height>0&&o(h)}),[h,c]),(0,n.jsxs)(d.E.main,{layout:!0,className:"m-auto overflow-hidden flex flex-col max-w-[480px] border-8 border-zinc-200 rounded-xl bg-[#ded895] relative max-h-[800px] w-full h-full",children:[(0,n.jsx)(N,{}),(0,n.jsx)(d.E.div,{ref:c,onTap:e,className:"h-[calc(100%-7rem)] z-10 flex relative overflow-hidden cursor-pointer",children:r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S,{}),(0,n.jsx)(z,{})]})},(null===(i=p().last(l))||void 0===i?void 0:i.key)||"initial"),(0,n.jsx)(k,{})]})}var C=function(){var i=(0,s.useState)({width:0,height:0}),t=i[0],e=i[1],n=function(){e({width:window.innerWidth,height:window.innerHeight})};return Z("resize",n),w((function(){n()}),[]),t},P=function(){var i=C().height;return(0,n.jsxs)("div",{className:"fixed w-full flex bg-zinc-800 p-5",style:{height:"".concat(i,"px")},children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"Flappy Bird"}),(0,n.jsx)("link",{rel:"icon",href:"favicon.ico"})]}),(0,n.jsx)(m,{children:(0,n.jsx)(I,{})})]})}}},function(i){i.O(0,[662,660,774,888,179],(function(){return t=8312,i(i.s=t);var t}));var t=i.O();_N_E=t}]);